---
layout: post 
title:  "Spring IOC / DI - ì˜ì¡´ì„± ì£¼ì… í¸"
date:   2022-03-25 12:05:21 +0800 
tags: ìŠ¤í”„ë§ 
color: rgb(98,170,255)
subtitle: ì˜ì¡´ì„± ì£¼ì… DIì— ëŒ€í•´ ì•Œì•„ë³´ì
--- 

> ëª©ì°¨ <br>
> [ì˜ì¡´ì„±ê´€ê³„ì£¼ì…](#ì˜ì¡´ì„±ê´€ê³„ì£¼ì…)<br>
> [Spring ICO (Inversion Of Control)](#Spring-ICO)<br>
> [IOC ì˜ˆì œ](#IOC-ì˜ˆì œ)<br>
> [@Component ë¥¼ ì…ë ¥í–ˆë”ë‹ˆ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.](#@Component-ë¥¼-ì…ë ¥í–ˆë”ë‹ˆ-ì—ëŸ¬ê°€-ë°œìƒí–ˆë‹¤.)<br>
> [ë²ˆì™¸ ì‹¤ë¬´ì—ì„œëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë§](#ë²ˆì™¸-ì‹¤ë¬´ì—ì„œëŠ”-ì˜-ì‚¬ìš©í•˜ì§€-ì•ŠëŠ”ë‹¤ëŠ”-ë§)<br>

 
## ì˜ì¡´ì„±ê´€ê³„ì£¼ì…

### Spring IOC

ìŠ¤í”„ë§ì—ì„œ ì¼ë°˜ì ì¸ Java ê°ì²´ë¥¼ `new`ë¡œ ìƒì„±í•˜ì—¬ ê°œë°œìê°€ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ `Spring Container`ì— ëª¨ë‘ ë§¡ê¸´ë‹¤.

ë”°ë¼ì„œ ê°œë°œìì˜ ì§ì ‘ ê´€ë¦¬ ì—†ì—†ë„ **`Spring Container`ëŠ” ê°ì²´ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œë˜ë©° ê°œë°œìê°€ ì›í•˜ëŠ” ìš”ì²­ì— ë”°ë¼ `DI`ì˜ ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.**

> ê°œë°œì ì¤‘ì‹¬ì˜ ê´€ë¦¬ â¡ í”„ë ˆì„ì›Œí¬ ì¤‘ì‹¬ì˜ ê°ì²´ê´€ë¦¬ ê¶Œí•œ ì œê³µ

ê·¸ë ‡ë‹¤ë©´ **`Spring Container`ê°€ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ë©´ ê°œë°œìëŠ” ì–´ë–»ê²Œ `Container`ë¡œ ë¶€í„° ê°ì²´ë¥¼ ê°€ì ¸ì™€ì•¼í• ê¹Œ?**

### IOC ì˜ˆì œ

ì´ì „ í¬ìŠ¤íŒ…ì—ì„œëŠ” `DI`ë¥¼ êµ¬í˜„í•˜ì—¬ ê°œë°œìê°€ ì§ì ‘ ì£¼ì…í•˜ëŠ” ë°©ì‹ì„ ë”°ëì§€ë§Œ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ”
`Container`ê°€ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ë°©ì‹ì„ êµ¬í˜„í•œë‹¤.

#### IOC - ì ìš© ì „
```java

@Component
public class ApplicationContextProvider implements ApplicationContextAware {

    private static ApplicationContext context;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException{
        context = applicationContext;
    }

    public static ApplicationContext getContext(){
        return context;
    }
}

public class UrlEncoder implements IEncoder {
    @Override
    public String encode(String message) {
        try {
            return UrlEncoder.encode(message, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    }
}

@Component
public class Base64Encoder implements IEncoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

@Component
public class Encoder {

    private IEncoder iEncoder;

    //TODO: í˜¸ì¶œí•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ Encoder ìì²´ì— ì£¼ì…í–ˆë‹¤.
    public Encoder(IEncoder iEncoder){
        this.iEncoder=iEncoder;
    }

    public void setIEncoder(IEncoder iEncoder){
        this.iEncoder = iEncoder;
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}

@SpringBootApplication
public class Main() {
    public static void main(String[] args) {
        SpringApplication.run(Main.class, args);

        //TODO: Spring Container í˜¸ì¶œ
        ApplicationContext context = ApplicationContextProvider.getContext();

        //TODO: ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬ì¤‘ì¸ íŠ¹ì • Beanì„ ê°€ì ¸ì˜¨ë‹¤.
        Base64Encoder encoder = context.getBean(Base64Encoder.class);
        UrlEncoder urlEncoder = context.getBean(UrlEncoder.class);

        String url = "www.google.com";
        Encoder encoder = new Encoder();

        String result = encoder.encode(url);
        System.out.println(result);

        encoder.setIEncoder(urlEncoder);
        String urlresult = encoder.encode(url);
        System.out.println(result);

    }
}
```

`@Component` ì–´ë…¸í…Œì´ì…˜ ì´ ë‹¬ë ¤ìˆëŠ” í´ë˜ìŠ¤ëŠ” ì•ìœ¼ë¡œ `Spring Container`ì—ì„œ Beanìœ¼ë¡œì„œ ê´€ë¦¬í•˜ë„ë¡ ì§€ì •í•œë‹¤.

`Container`ì— ì£¼ì…ê¹Œì§€ ì™„ë£Œí–ˆë‹¤ë©´ ë” ë‚˜ì•„ê°€ ì»¨í…Œì´ë„ˆê°€ ìë™ ê´€ë¦¬ ë° ì£¼ì… ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤.


#### IOC - ì ìš© í›„

```java
@Component
public class ApplicationContextProvider implements ApplicationContextAware {
    
    private static ApplicationContext context;
    
    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException{
        context = applicationContext;
    }
    
    public static ApplicationContext getContext(){
        return context;
    }
}

public class UrlEncoder implements IEncoder {
    @Override
    public String encode(String message) {
        try {
            return UrlEncoder.encode(message, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    }
}

@Component
public class Base64Encoder implements IEncoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

@Component
public class Encoder {

    private IEncoder iEncoder;

    //TODO: @Component ì—ëŸ¬ ë°œìƒ
    public Encoder(IEncoder iEncoder){
        this.iEncoder=iEncoder;
    }

    //TODO: ì–´ë–¤ Beanì„ ì‚¬ìš©í• ì§€ ì§€ì •í•´ì£¼ì!
    public void setIEncoder(@Qualifier("urlEncoder")IEncoder iEncoder){
        this.iEncoder = iEncoder;
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}

@SpringBootApplication
public class Main() {
    public static void main(String[] args) {
        SpringApplication.run(Main.class, args);
        
        //TODO: Spring Container í˜¸ì¶œ
        ApplicationContext context = ApplicationContextProvider.getContext();
        //Base64Encoder encoder = context.getBean(Base64Encoder.class);
        //UrlEncoder urlEncoder = context.getBean(UrlEncoder.class);
        
        String url = "www.google.com";
        Encoder encoder = context.gerBean(Encoder.class);
        String result = encoder.encode(url);
        
        //TODO: @Qualifier ì–´ë…¸í…Œì´ì…˜ì— ì£¼ì…í•œ Beanì— ë”°ë¼ ì¶œë ¥ ê²°ê³¼ê°€ ë‹¬ë¼ì§„ë‹¤.
        System.out.println(result);
        
    }
}

```

### @Component ë¥¼ ì…ë ¥í–ˆë”ë‹ˆ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

ë‹¤ìŒ ì½”ë“œì—ì„œ `@Component`ë¥¼ ê°€ì§€ëŠ” í´ë˜ìŠ¤ê°€ `Encoder`ì™€ `Base54Encoder` ë‘ê°€ì§€ê°€ ìˆë‹¤.

ì—¬ê¸°ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ë° Spring ì—ì„œëŠ” ë‘ê°€ì§€ì˜ `@Component` ì—ì„œ ì–´ë–¤ Bean ì‚¬ì´ì— ì¶©ëŒì´ ë°œìƒí•˜ëŠ”ë°
ìš°ë¦¬ëŠ” `@Qualifier` ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ë³€ìˆ˜ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼í•œë‹¤.

```java
public class UrlEncoder implements IEncoder {
    @Override
    public String encode(String message) {
        try {
            return UrlEncoder.encode(message, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    }
}

@Component
public class Base64Encoder implements IEncoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

@Component
public class Encoder {

    private IEncoder iEncoder;

    //TODO: @Component ì—ëŸ¬ ë°œìƒ
    public Encoder(IEncoder iEncoder){
        this.iEncoder=iEncoder;
    }
    
    //TODO: ì–´ë–¤ Beanì„ ì‚¬ìš©í• ì§€ ì§€ì •í•´ì£¼ì!
    public void setIEncoder(@Qualifier("urlEncoder")IEncoder iEncoder){
        this.iEncoder = iEncoder;
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}
```

ê·¸ë ‡ë‹¤ë©´ ì™œ ë°œìƒí•˜ëŠ” ê±¸ê¹Œ?

**`IEncoder`ë¥¼ ìƒì†ë°›ì€ ë‘ í´ë˜ìŠ¤ë¥¼ ë³¸ë‹¤ë©´ `Spring` ì…ì¥ì—ì„œëŠ” ì–´ë–¤ ë‘ í´ë˜ìŠ¤ ì¤‘ì—ì„œ ê°ì²´ë¥¼ ë°›ì•„ì•¼ í•˜ëŠ”ì§€ ê¶ê¸ˆí•  ê²ƒì´ê¸°
ë•Œë¬¸ì— ì§€ì •í•´ ì£¼ì–´ì•¼í•œë‹¤.** ë¼ê³  ë‚˜ëŠ” ìƒê°í•œë‹¤.

### ë²ˆì™¸ ì‹¤ë¬´ì—ì„œëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë§

ë‚œ ë‘ê°œì˜ `Encoder`ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

**ì§ì ‘ ë“±ë¡í•  í´ë˜ìŠ¤ì˜ `@Component`ë¥¼ ì§€ìš°ê³  ì§ì ‘ `Bean`ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ê°€ëŠ¥í•˜ë‹¤!**

> @Configuration : í•œê°œì˜ í´ë˜ìŠ¤ì—ì„œ ì—¬ëŸ¬ê°œì˜ Beanì„ ê´€ë¦¬í•  ê²ƒì„ ëª…ì‹œ

```java
@Configuration
class AppConfig{
    @Bean("base64Encode")
    public Encoder encoder(Base64Encoder base64Encoder){
        return new Encoder(base64Encoder);
    }
    
    @Bean("urlEncode")
    public Encoder encoder(UrlEncoder urlEncoder){
        return new Encoder(urlEncoder);
    }
}

@SpringBootApplication
public class Main() {
    public static void main(String[] args) {
        SpringApplication.run(Main.class, args);

        //TODO: Spring Container í˜¸ì¶œ
        ApplicationContext context = ApplicationContextProvider.getContext();

        String url = "www.google.com";
        Encoder encoder = context.gerBean("urlEncode", Encoder.class);
        String result = encoder.encode(url);

        //TODO: @Qualifier ì–´ë…¸í…Œì´ì…˜ì— ì£¼ì…í•œ Beanì— ë”°ë¼ ì¶œë ¥ ê²°ê³¼ê°€ ë‹¬ë¼ì§„ë‹¤.
        System.out.println(result);

    }
}
```

## ğŸ§¾ Reference
- [ì±… - ìŠ¤í”„ë§ì„ ì…ë¬¸ì„ ìœ„í•œ ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=55641908)
- [í•œ ë²ˆì— ëë‚´ëŠ” Java/Spring ì›¹ ê°œë°œ ë§ˆìŠ¤í„° ì´ˆê²©ì°¨ íŒ¨í‚¤ì§€ Online.]()
