# 실행문맥

## 렉시컬 환경

JS 엔진이 코드를 실행하기 위해 자원을 모아 둔 곳으로 `함수 또는 블록의 유효 범위안에 있는 식별자와 그 결괏값이 저장되는 곳이다.`

해당 엔진은 유효범위 안에 있는 식별자와 그 값을 키와 쌍으로 바인드해서 `렉시컬 환경 컴포넌트`에 기록한다.


렉시컬 환경 컴포넌트는 `환경 레코드`와 `외부 렉시컬 환경 참조` 로 이루어져 있다.

```JSON
LexicalEnvironment: {
    Environment: {},
    OuterLexicalEnvironment Reference:{}
}

```

### 🦐 환경 레코드

렉시컬 환경 안의 식별자와 그 식별자가 가리키는 값의 묶음이 실제로 저장되는 영역

이 환경의 레코드는 `선언적 환경 레코드`와 `객체 환경 레코드`로 구성되어 있으며 값의 유형에 따라 쓰임새가 달라진다.

```
✔ 선언적 환경 레코드

함수와 변수, catch 문의 식별자와 실행 결과가 저장되는 영역

✔ 객체 환경 레코드

실행 문맥 외부에 별도로 저장된 객체의 참조에서 데이터를 읽거나 쓴다.

즉, `with문`의 렉시컬 환경이나 전역 객체처럼 별도의 객체에 저장된 그 객체가 가진 키와 값의 쌍을 복사해 오는 것이 아니라 그 객체의 전체의 참조를 가져와 객체 환경 레코드의 `bindObject`라는 프로퍼티에 바인드 하도록 만들어져있다.
```

### 🦐 외부 렉시컬 환경 참조

함수 안에 함수를 중첨해서 정의할 수 있는 언어이다.

따라서 JS 엔진은 유효 범위 너머의 유효 범위도 검색할 수 있어야하며
 외부 렉시컬 환경 참조에는 함수를 둘러싸고 있는 코드가 속한 렉시컬 환경 컴포넌트의 참조가 저장된다.

중첩된 함수 안에서 바깥 코드에 정의된 변수를 읽거나 써야 할 때, 자바스크립트 엔진은 외부 렉시컬 환경 참조를 따라 한 단계식 `렉시컬 환경`을 거슬러 올라가서 그 변수를 검색한다. 

## 변수 환경

렉시컬 환경 컴포넌트와 변구 환경 컴포넌트는 타입이 같고 `with` 문을 사용할 때를 제외하면 내부 값이 동일하여 동일 취급해도 무리가 없다.

## 디스 바인딩

실행문맥, 렉시컬환경, 환경 레코드가 생성되면 실행문맥에 있는 `디스 바인딩 컴포넌트`에 호출한 객체의 참조를 저장하며 이것으로 `this`를 결정한다.

이는 동적이며 함수를 호출하는 상황에 따라 가리키는 객체가 변하게된다.


## 실행
