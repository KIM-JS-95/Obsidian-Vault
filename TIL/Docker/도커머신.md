# ğŸ‹ ë„ì»¤ë¨¸ì‹  ğŸ‹

ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆëŠ” ê²½ìš° Dockerë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ë¡œ ì‹¤í–‰í•˜ê±°ë‚˜ 
Linux ì—ì„œ **ë¡œì»¬ë¡œ ì‹¤í–‰í•  ë¿ë§Œ ì•„ë‹ˆë¼ í´ë¼ìš°ë“œì— ì‰½ê²Œ ë°°í¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**

ì›ê²© ê°€ìƒ ë¨¸ì‹ (VM)ì„ ì‰½ê²Œ ìƒì„±í•˜ê³  ì´ëŸ¬í•œ ì»¨í…Œì´ë„ˆë¥¼ ì›ê²©ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ `docker-machine` ì´ë¼ê³  í•©ë‹ˆë‹¤ .

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F995158475E1D5BB70B)


## ğŸ¦ ë„ì»¤ ë¨¸ì‹ ì˜ ëª©ì 

`docker-machine`ì˜ ëª©ì ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë°°í¬ í™˜ê²½ì„ ë§Œë“¤ê³  ì‹¤í–‰ë˜ëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ë ¤ëŠ” ê²½ìš°ì´ë‹¤.

ì—°ê²°í•˜ë ¤ëŠ” VMì˜ ê²½ìš° Azura, AWS ë“±ê³¼ ê°™ì€ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤.

![](https://www.macadamian.com/wp-content/uploads/2017/01/1-KO-vKqNqGk_8feDcpePvQQ.png.webp)



## ğŸ¦ ì´ˆê¸° ì„¤ì • ë°©ë²•
### AWS Access Key ìƒì„±

AWS EC2ë¥¼ ë§Œë“¤ê¸° ì´ì „ ê°œì¸ [AWS Access Key](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_access-keys.html) ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì•¼í•œë‹¤.

### Docker - AWS í”„ë¡œë¹„ì €ë‹ 

`create` ì˜µì…˜ì—ëŠ” ê´€ë¦¬ìë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•œ  2ê°€ì§€ê°€ ìˆë‹¤.

- `Access Key / Secret Key` ì˜µì…˜ ì…ë ¥ìœ¼ë¡œ ì¸ì¦

ì‚¬ìš©ì ì¸ì¦ê³¼ ë™ì‹œì— ìƒì„±ì„ í•˜ëŠ” ê°„ë‹¨í•œ ë°©ì‹ì´ë‹¤.

```shell
docker-machine create --driver amazonec2 --amazonec2-access-key <Your Access Key> --amazonec2-secret-key <Your Secret Key>  aws-sandbox
```

- `aws/credentials` ì„ ì´ìš©í•˜ì—¬ ìƒì„±í•˜ëŠ” ë°©ë²•

ì´ ë°©ì‹ì€ í•´ë‹¹ í´ë”ì— ì ‘ê·¼í•˜ì—¬ ì§ì ‘ ì…ë ¥í•˜ëŠ” ë°©ì‹ì´ì§€ë§Œ êµ‰ì¥íˆ ë³µì¡í•˜ë‹¤.

[êµ¬ì„± ë° ìê²© ì¦ëª… íŒŒì¼ ì„¤ì • - AWS](https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-configure-files.html)

```shell
[default] 
aws_access_key_id=AKI*******
aws_secret_access_key=8T93C*******
```

```shell
$ docker-machine create --driver amazonec2 aws-sandbox
```

- AWS EC2 ìƒì„± í™•ì¸
![img_1](https://user-images.githubusercontent.com/65659478/173469514-9839ad86-56cf-40ad-bfa9-e04c0ca018ee.png)


- bash ë¡œ í™•ì¸

```shell
$ docker-machine ls
```

![img_2](https://user-images.githubusercontent.com/65659478/173469654-17b767e7-244f-46c8-ba2b-0fda33d662a4.png)


## ğŸ¦ í›„ê¸°

ì§€ê¸ˆê¹Œì§€ `AWS CLI`ì— ì ‘ê·¼í•˜ê¸°ìœ„í•´ `PUTTY`ë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ `AWS ìì²´ ì ‘ì† ê¸°ëŠ¥`ì„ ì‚¬ìš©í•´ ì™”ë‹¤.

AWS ì ‘ì†ì„ ìœ„í•œ PUTTYë¥¼ ì„¤ì¹˜í•˜ê³  ì ‘ì† ê³¼ì •ì— ë§ì€ ë²ˆê±°ë¡œì›€ì´ ë”°ë¼ì™”ê³  

ë„¤í¬ì›Œí¬ê°€ ì¡°ê¸ˆì´ë¼ë„ ë¶ˆì•ˆì •í•˜ë©´ ì ‘ì†ì´ ëŠì–´ì§€ëŠ” ìƒí™©ì´ ë°œìƒí•˜ê³ ëŠ” í–ˆë‹¤.

ì´ëŸ¬í•œ ë¶ˆí¸í•¨ì—ë„ **íŒ¨Xìº í¼ìŠ¤, êµ­ë¹„í•™ì›, ë¶€íŠ¸ìº í”„**ì—ì„œ ë˜í•œ ì´ëŸ¬í•œ ë°©ë²•ìœ¼ë¡œ êµìœ¡ì„ í•˜ê² ì§€ë§Œ ì•„ë§ˆ `Docker`ì„ êµìœ¡í•˜ê¸° ìœ„í•œ ì‹œê°„ ë¶€ì¡± 
í˜¹ì€ ë°±ì—”ë“œì™€ ë‹¤ë¥¸ ë¶„ì•¼(DevOps)ì´ê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ êµìœ¡í•˜ëŠ” ê²ƒì¼ì§€ë„ ëª¨ë¥¸ë‹¤.

`docker-machine`ì„ ì‚¬ìš©í•˜ê²Œë˜ë©´ì„œ Docker ëª…ë ¹ì–´ë§Œ ì•Œê³ ìˆë‹¤ë©´ ì •ë§ ë‹¤ë£¨ê¸° ì‰¬ì› ê³  `Docker - jenkins` ì‚¬ìš© ëª©ì ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹ í•œë‹¤ë©´
ë”í•  ë‚˜ìœ„ ì—†ì´ ì¢‹ì€ ì„ íƒì´ë¼ê³  ìƒê°í•œë‹¤.

## ğŸ¦ ì˜µì…˜
```shell
--amazonec2-instance-type  = ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ì„¤ì • 
--amazonec2-open-port  = í¬íŠ¸ ê°œë°© (ë‹¤ì¤‘ ê°œë°©ì„ ì›í• ì‹œ  [ --amazonec2-open-port 8000 --amazonec2-open-port 8080 ]) 
--amazonec2-region  = ë¦¬ì „ ì„¤ì • 
--amazonec2-root-size = ë£¨íŠ¸ ë””ìŠ¤í¬ ì‚¬ì´ì¦ˆ ì„¤ì • (GB ë‹¨ìœ„) 
--amazonec2-access-key = ì—‘ì„¸ìŠ¤í‚¤  
--amazonec2-secret-key = ë¹„ë°€í‚¤
```

# Reference

- [What is docker-machine?](https://www.macadamian.com/learn/docker-machine-basic-examples/)
- [ë„ì»¤ë¨¸ì‹ ìœ¼ë¡œ aws ec2ì— í”„ë¡œë¹„ì €ë‹ í•˜ê¸°](https://sudarlife.tistory.com/entry/docker-machine-%EC%A0%95%EB%A6%AC-%EB%8F%84%EC%BB%A4-%EB%A8%B8%EC%8B%A0-%EC%9C%BC%EB%A1%9C-aws-ec2-%EC%97%90-%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%80%EB%8B%9D-%ED%95%98%EA%B8%B0)