## **🟢 오라클 데이터베이스 아키텍처 개요**  
Oracle Database는 **메모리 구조**, **프로세스 구조**, **저장소 구조**의 세 가지 주요 구성 요소로 이루어져 있다.  

---

# **1️⃣ 오라클 아키텍처 개요**  
🔹 **인스턴스 (Instance)**: 오라클 데이터베이스를 관리하는 **메모리 + 백그라운드 프로세스**의 조합

🔹 **데이터베이스 (Database)**: 실제 데이터가 저장되는 **파일들의 집합**  

**📌 주요 구성 요소**

📍 **메모리 구조 (SGA, PGA)** → 데이터를 저장하고 빠른 처리를 지원  
📍 **프로세스 구조 (백그라운드 프로세스)** → 사용자 요청을 처리하고 DB를 관리  
📍 **저장소 구조 (데이터 파일, 로그 파일 등)** → 데이터를 영구적으로 저장  

---

# **2️⃣ 메모리 구조**
### **🟢 SGA (System Global Area, 공유 메모리 → 여러 사용자가 공유)**
SGA는 여러 세션이 공유하는 메모리 영역으로, 오라클 인스턴스가 실행될 때 할당됨.  

- **Shared Pool** → SQL 실행 계획 저장 및 재사용 (`Library Cache`, `Data Dictionary Cache`)  

- **Database Buffer Cache** → 데이터를 메모리에 캐싱하여 성능 향상  

- **Redo Log Buffer** → 변경 사항을 로그에 기록하여 장애 복구 지원  

### **🟢 PGA (Program Global Area, 개별 프로세스 메모리)**
PGA는 각 <u>개별 프로세스(User, Server, Background)</u>가 사용하는 메모리 공간으로, `소트 연산`, `조인`, `커서 관리` 등을 처리

- **Static PGA** → 세션당 고정된 메모리  
- **Dynamic PGA** → 필요에 따라 증가/감소하는 메모리  


# **3️⃣ 프로세스 구조**

### **🟢 사용자 프로세스 (User Process)**
- 사용자가 SQL을 실행하면 생성됨 (SQL*Plus, TOAD, 애플리케이션 서버 등)  

### **🟢 서버 프로세스 (Server Process)**
- SQL을 실행하고 데이터를 반환하는 프로세스 (전용/공유 모드 지원)  

### **🟢 백그라운드 프로세스 (Background Process)**
- 데이터베이스를 관리하고 성능을 최적화하는 핵심 프로세스  

| 프로세스 | 역할 |
|----------|------|
| **PMON (Process Monitor)** | 비정상 종료된 프로세스를 정리하고, 리소스 회수 |
| **SMON (System Monitor)** | 인스턴스 복구, 임시 세그먼트 정리 |
| **DBWR (Database Writer)** | 데이터 버퍼 캐시의 변경된 블록을 디스크에 기록 |
| **LGWR (Log Writer)** | Redo 로그 버퍼의 내용을 리두 로그 파일로 기록 |
| **CKPT (Checkpoint Process)** | 데이터 파일과 컨트롤 파일에 체크포인트 정보 기록 |
| **ARCn (Archive Process)** | 리두 로그를 아카이브 로그로 백업하여 장애 복구 지원 |

> **🔥 핵심 프로세스: `DBWR`, `LGWR`, `SMON`, `PMON`**  


# **4️⃣ 저장소 구조**
### **🟢 논리적 저장소 구조**
- **테이블 스페이스 (Table space)** → DB를 논리적으로 구분하는 단위  
- **세그먼트 (Segment)** → 테이블, 인덱스 등 데이터 객체 저장  
- **익스텐트 (Extent)** → 연속된 블록들의 집합  
- **데이터 블록 (Data Block)** → 최소 저장 단위 (보통 8KB)  

### **🟢 물리적 저장소 구조**
- **데이터 파일 (Data Files)** → 실제 데이터가 저장되는 파일  
- **컨트롤 파일 (Control File)** → DB 상태 및 구조 정보 저장  
- **리두 로그 파일 (Redo Log Files)** → 데이터 변경 이력을 기록하여 복구 지원  
- **아카이브 로그 파일 (Archive Log Files)** → 리두 로그 파일을 백업하여 장애 복구 가능  


# **5️⃣ 오라클 데이터 처리 과정**
### **📌 SQL 실행 시 내부 흐름**
1️⃣ `사용자 프로세스`가 SQL을 실행 요청  
2️⃣ `서버 프로세스`가 **SGA(공유 풀)**에서 SQL을 분석 (`Library Cache`)  
3️⃣ 실행 계획 수립 후 필요한 데이터를 **데이터베이스 버퍼 캐시**에서 조회  
4️⃣ 결과를 클라이언트에 반환  
5️⃣ 변경된 데이터는 **Redo Log Buffer**에 저장 후 **LGWR**이 디스크로 기록  
6️⃣ **DBWR**가 일정 주기로 변경된 데이터를 **데이터 파일**에 기록  
7️⃣ 트랜잭션이 `COMMIT`되면 변경 사항이 영구 저장됨  


# **✅ 오라클 아키텍처 정리**
| 구성 요소 | 설명 |
|-----------|------|
| **SGA (공유 메모리)** | 공유 풀, 버퍼 캐시, 리두 로그 버퍼 포함 |
| **PGA (개별 메모리)** | 각 프로세스가 사용하는 비공유 메모리 |
| **프로세스 구조** | PMON, SMON, LGWR, DBWR 등의 백그라운드 프로세스 |
| **저장소 구조** | 데이터 파일, 리두 로그 파일, 컨트롤 파일 |